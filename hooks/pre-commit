#!/bin/sh
#
# Pre-commit hook to generate Rust documentation
#
# This hook runs the rustdoc.sh script to update documentation
# before each commit.

echo "Running rustdoc generation..."

# Change to the bytetrack directory and run the rustdoc script
cd "$(git rev-parse --show-toplevel)/bytetrack" || exit 1

# Run the rustdoc script
if ./rustdoc.sh; then
    echo "✅ Rustdoc generation completed successfully"
    
    # Add the generated rustdoc.md to the staging area if it was modified
    git add rustdoc.md 2>/dev/null || true
else
    echo "❌ Rustdoc generation failed"
    exit 1
fi

exit 0
